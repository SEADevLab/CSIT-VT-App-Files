import { createContext, useReducer } from "react";

export const MalwareFilesContext = createContext();

export const malwarefilesReducer = (state, action) => {
  switch (action.type) {
    case "SET_MALWAREFILES":
      return {
        malFiles: action.payload,
      };
    case "UPLOADED_MALWAREFILES":
      return {
        uploadFiles: action.payload.malwarefiles,
        dupeFiles: action.payload.duplicateFiles,
      };
    case "CREATE_MALWAREFILES":
      return {
        malFiles: [action.payload, ...state.malFiles],
      };
    default:
      return state;
  }
};

export const MalwareFilesContextProvider = ({ children }) => {
  const [state, dispatch] = useReducer(malwarefilesReducer, {
    malFiles: null,
    dupeFiles: null,
    uploadFiles: null,
  });

  return (
    <MalwareFilesContext.Provider value={{ ...state, dispatch }}>
      {children}
    </MalwareFilesContext.Provider>
  );
};
